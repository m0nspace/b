"use strict";(globalThis["webpackChunkradmir_interfaces"]=globalThis["webpackChunkradmir_interfaces"]||[]).push([[6716],{737505:(e,s,t)=>{t.d(s,{Z:()=>w});var l=t(373396),i=t(87139);const n=e=>((0,l.dD)("data-v-5e0ac054"),e=e(),(0,l.Cn)(),e),a=n((()=>(0,l._)("use",{"xlink:href":"icons.svg#long-arrow-left"},null,-1))),o=[a],u={key:1,class:"controls-button--text"},c={key:2,class:"controls-button--text"},r={key:3,class:"controls-button--text"},d={key:4,class:"controls-button--text"};function _(e,s,t,n,a,_){return(0,l.wg)(),(0,l.iD)("div",{class:(0,i.C_)(["controls-button",{pressed:a.pressed,clickable:t.clickable,"controls-button_rounded":_.isRounded}]),onClick:s[0]||(s[0]=e=>_.onClick())},[_.getArrow()?((0,l.wg)(),(0,l.iD)("svg",{key:0,class:"arrow",style:(0,i.j5)({transform:`rotate(${_.getArrow().param}deg)`})},o,4)):(0,l.kq)("",!0),_.getEscape()?((0,l.wg)(),(0,l.iD)("div",u,"Esc")):(0,l.kq)("",!0),_.getTab()?((0,l.wg)(),(0,l.iD)("div",c,"Tab")):(0,l.kq)("",!0),_.getKey()?((0,l.wg)(),(0,l.iD)("div",r,(0,i.zw)(_.getKey().text),1)):(0,l.kq)("",!0),t.text?((0,l.wg)(),(0,l.iD)("div",d,(0,i.zw)(t.text),1)):(0,l.kq)("",!0)],2)}const f={props:{keyCode:{default:-1},clickable:{default:!0},text:{default:!1}},data(){return{pressed:!1,arrows:[{keyCode:window.KEY_CODE_ARROW_LEFT,param:0},{keyCode:window.KEY_CODE_ARROW_TOP,param:90},{keyCode:window.KEY_CODE_ARROW_RIGHT,param:180},{keyCode:window.KEY_CODE_ARROW_BOTTOM,param:270}],escape:window.KEY_CODE_ESC,tab:window.KEY_CODE_TAB,keys:[{keyCode:window.KEY_CODE_F,text:"F"}]}},created(){document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp)},unmounted(){document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp)},computed:{isRounded(){const e=this.getKey();return e&&e.text&&1===e.text.length||this.text&&1===this.text.length}},methods:{getArrow(){const e=this.arrows.filter((e=>e.keyCode==this.keyCode));return!!e.length&&e[0]},getKey(){const e=this.keys.filter((e=>e.keyCode==this.keyCode));return!!e.length&&e[0]},getEscape(){return this.keyCode==this.escape},getTab(){return this.keyCode==this.tab},onKeyDown(e){e.keyCode==this.keyCode&&(this.pressed=!0)},onClick(){this.$emit("pressed",this.keyCode,!0)},onKeyUp(e){e.keyCode==this.keyCode&&(this.pressed=!1,this.$emit("pressed",this.keyCode,!1))}}};var k=t(940089);const p=(0,k.Z)(f,[["render",_],["__scopeId","data-v-5e0ac054"]]),w=p},150670:(e,s,t)=>{t.d(s,{Z:()=>d});var l=t(373396),i=t(87139);const n={class:"controls-close"};function a(e,s,t,a,o,u){const c=(0,l.up)("ControlsButton");return(0,l.wg)(),(0,l.iD)("div",n,[(0,l.Wm)(c,{keyCode:o.ESCAPE,onPressed:s[0]||(s[0]=e=>u.close())},null,8,["keyCode"]),(0,l._)("div",{class:"controls-close--text",onClick:s[1]||(s[1]=e=>u.close())},(0,i.zw)(t.text),1)])}var o=t(737505);const u={props:{text:{type:String,default:"Закрыть"}},components:{ControlsButton:o.Z},data(){return{ESCAPE:window.KEY_CODE_ESC}},created(){},methods:{close(){this.$emit("close")}}};var c=t(940089);const r=(0,c.Z)(u,[["render",a],["__scopeId","data-v-1f9bbdce"]]),d=r},51527:(e,s,t)=>{t.r(s),t.d(s,{default:()=>Le});var l=t(373396),i=t(87139),n=t(349242);const a=t.p+"img/money.760c3dbd.svg",o=t.p+"img/logo.6aa3d4c6.svg",u={class:"fuel__container"},c={class:"fuel__title"},r={class:"fuel__row"},d={class:"fuel__subtitle"},_={class:"fuel__row"},f={key:0,class:"fuel-button__wrapper"},k={class:"fuel-button__text"},p=(0,l._)("img",{class:"fuel-button__icon",src:a},null,-1),w={key:1,class:"fuel-button__wrapper"},m={key:0,class:"fuel-message"},v=(0,l._)("img",{class:"fuel-message__icon",src:o},null,-1),C={class:"fuel__subtitle"};function h(e,s,t,a,o,h){const y=(0,l.up)("IconClose"),g=(0,l.up)("ControlsClose"),E=(0,l.up)("FuelVolume"),T=(0,l.up)("FuelTank"),b=(0,l.up)("FuelClassification");return(0,l.wg)(),(0,l.iD)("div",{class:(0,i.C_)(["fuel iface-container",{fuel_mobile:h.isMobile}])},[(0,l._)("div",u,[(0,l._)("div",{class:"fuel__content",style:(0,i.j5)({opacity:h.isFinished?.15:1})},[h.isMobile?((0,l.wg)(),(0,l.iD)("div",{key:0,class:"fuel__close",onClick:s[0]||(s[0]=(...e)=>h.close&&h.close(...e))},[(0,l.Wm)(y)])):((0,l.wg)(),(0,l.j4)(g,{key:1,class:"fuel__close",onClose:h.close},null,8,["onClose"])),(0,l._)("div",c,(0,i.zw)(h.title),1),(0,l._)("div",r,[(0,l._)("div",d,(0,i.zw)(h.subtitle),1),(0,l.Wm)(E,{type:o.type,units:h.units,fill:o.fill,tank:o.tank,maxTank:o.maxTank},null,8,["type","units","fill","tank","maxTank"])]),(0,l._)("div",_,[(0,l.Wm)(b,{type:o.type,fuelClass:o.fuelClass,fuelClasses:h.fuelClasses,fuelClassesColors:h.fuelClassesColors,"onSelect:class":h.selectClass},{tank:(0,l.w5)((()=>[null!==o.fuelClass?((0,l.wg)(),(0,l.j4)(T,{key:0,availableTank:h.availableTank,units:h.units,type:o.type,modelValue:o.fill,"onUpdate:modelValue":s[1]||(s[1]=e=>o.fill=e),class:(0,i.C_)({fuel__tank_disabled:o.fillingState>o.FILLING_STATE.NOT_STARTED})},null,8,["availableTank","units","type","modelValue","class"])):((0,l.wg)(),(0,l.iD)("div",{key:1,class:(0,i.C_)(["fuel__tank-empty",{"fuel__tank-empty_electro":1===o.type}])},"XX"+(0,i.zw)(h.units),3))])),_:1},8,["type","fuelClass","fuelClasses","fuelClassesColors","onSelect:class"])]),(0,l.Wm)(n.uT,{name:"fade",mode:"out-in",appear:""},{default:(0,l.w5)((()=>[null!==o.fuelClass?((0,l.wg)(),(0,l.iD)("div",{key:0,class:(0,i.C_)(["fuel-button",{"fuel-button_charging":o.fillingState>o.FILLING_STATE.NOT_STARTED||0===o.fill}]),onClick:s[2]||(s[2]=e=>h.confirm())},[(0,l.Wm)(n.uT,{name:"fade",mode:"out-in"},{default:(0,l.w5)((()=>[o.fillingState!==o.FILLING_STATE.STARTED?((0,l.wg)(),(0,l.iD)("div",f,[(0,l._)("div",k,(0,i.zw)(h.buttonText)+" за",1),(0,l.Uk)((0,i.zw)(h.cost),1),p])):((0,l.wg)(),(0,l.iD)("div",w,"идет "+(0,i.zw)(o.type===o.FILLING_TYPE.FUEL?"заправка":"зарядка")+"...",1))])),_:1})],2)):(0,l.kq)("",!0)])),_:1})],4),h.isFinished?((0,l.wg)(),(0,l.iD)("div",m,[v,(0,l._)("div",C,"Автомобиль "+(0,i.zw)(o.type===o.FILLING_TYPE.FUEL?"заправлен":"заряжен")+" на "+(0,i.zw)(Math.ceil(o.fill/100*h.availableTank))+(0,i.zw)(h.units)+"!",1)])):(0,l.kq)("",!0)])],2)}const y={FUEL:0,ELECTRO:1},g=[null,null,"ЭЛЕКТРО",null],E=["#F4F1E199","#F4F1E199","#65C466","#F4F1E199"],T=[92,95,98,"DT"],b=["#F4F1E1","#65C466","#0D73FD","#525252"];var D=t(150670);const L=t.p+"img/fuel.70561e44.svg",F=t.p+"img/electricity-charging.112f470a.svg",I={class:"fuel-volume"},S={class:"fuel-volume__wrapper"},M={class:"fuel-volume__text"},x={class:"fuel-volume__value fuel-volume__value_active"},O={key:0,class:"fuel-volume__value"},R={key:0,class:"fuel-volume__icon",src:L},A={key:1,class:"fuel-volume__icon",src:F},P={class:"fuel-volume-bar"};function U(e,s,t,n,a,o){return(0,l.wg)(),(0,l.iD)("div",I,[(0,l._)("div",S,[(0,l._)("div",M,[(0,l._)("div",x,(0,i.zw)(t.tank)+(0,i.zw)(t.units),1),t.type!==e.FILLING_TYPE.ELECTRO?((0,l.wg)(),(0,l.iD)("div",O,"/"+(0,i.zw)(t.maxTank)+(0,i.zw)(t.units),1)):(0,l.kq)("",!0)]),t.type===e.FILLING_TYPE.FUEL?((0,l.wg)(),(0,l.iD)("img",R)):((0,l.wg)(),(0,l.iD)("img",A))]),(0,l._)("div",P,[(0,l._)("div",{class:"fuel-volume-bar__progress fuel-volume-bar__progress_active",style:(0,i.j5)({width:`${o.currentTank}%`})},null,4),(0,l._)("div",{class:"fuel-volume-bar__progress",style:(0,i.j5)({width:`${o.currentTank+t.fill}%`})},null,4)])])}const z={props:["type","units","fill","tank","maxTank","chargingVolume"],data:()=>({FILLING_TYPE:y}),computed:{currentTank(){return Math.ceil(this.tank/this.maxTank*100)}}};var N=t(940089);const Y=(0,N.Z)(z,[["render",U]]),K=Y,$=t.p+"img/thunder.37a088ab.svg",G={class:"fuel-classification__wrapper"},V=(0,l._)("div",{class:"fuel-classification__subtitle"},"Классификация",-1),W={key:0,class:"fuel-classification__content"},Z=["onClick"],q={class:"fuel-classification__title"},j={class:"fuel-classification__number"},B={key:1,class:"fuel-classification__content"},H=["onClick"],X={key:0,class:"fuel-classification__title"},J={key:1,class:"fuel-classification__icon",src:$},Q={class:"fuel-classification__wrapper"},ee={class:"fuel-classification__subtitle"},se={class:"fuel-classification__tank"};function te(e,s,t,n,a,o){return(0,l.wg)(),(0,l.iD)("div",{class:(0,i.C_)(["fuel-classification",{"fuel-classification_electro":t.type===e.FILLING_TYPE.ELECTRO}])},[(0,l._)("div",G,[V,t.type===e.FILLING_TYPE.FUEL?((0,l.wg)(),(0,l.iD)("div",W,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.fuelClasses,((e,s)=>((0,l.wg)(),(0,l.iD)("div",{class:(0,i.C_)(["fuel-classification__column",{"fuel-classification__column_active":s===t.fuelClass}]),key:s,onClick:e=>o.selectClass(s)},[(0,l._)("div",q,(0,i.zw)("DT"!==e?"Бензин":"Дизель"),1),(0,l._)("div",j,(0,i.zw)(e),1),(0,l._)("div",{class:"fuel-classification__marker",style:(0,i.j5)({background:t.fuelClassesColors[s]})},null,4)],10,Z)))),128))])):((0,l.wg)(),(0,l.iD)("div",B,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.fuelClasses,((e,s)=>((0,l.wg)(),(0,l.iD)("div",{class:(0,i.C_)(["fuel-classification__column fuel-classification__column_electro",{"fuel-classification__column_electro-active":s===t.fuelClass,"fuel-classification__column_disabled":!e}]),key:s,onClick:e=>o.selectClass(s),style:(0,i.j5)({paddingTop:"0.7vh"})},[e?((0,l.wg)(),(0,l.iD)("div",X,(0,i.zw)(e),1)):(0,l.kq)("",!0),e?((0,l.wg)(),(0,l.iD)("img",J)):(0,l.kq)("",!0),(0,l._)("div",{class:"fuel-classification__marker",style:(0,i.j5)({background:t.fuelClassesColors[s],"margin-top":e?"none":"auto"})},null,4)],14,H)))),128))]))]),(0,l._)("div",Q,[(0,l._)("div",ee,(0,i.zw)(o.typeLabel),1),(0,l._)("div",se,[(0,l.WI)(e.$slots,"tank")])])],2)}const le={props:["type","fuelClass","fuelClasses","fuelClassesColors"],data:()=>({FILLING_TYPE:y}),computed:{typeLabel(){return this.type===y.ELECTRO?"Зарядка":"Заправка"}},methods:{selectClass(e){this.$emit("select:class",e)}}},ie=(0,N.Z)(le,[["render",te]]),ne=ie,ae=t.p+"img/tank-hint.71508ea8.svg",oe={class:"fuel-tank__volume"},ue={key:0,class:"fuel-tank__battery"},ce={key:0,class:"fuel-tank__hint",src:ae},re={key:0,class:"fuel-tank__hint",src:ae};function de(e,s,t,a,o,u){return(0,l.wg)(),(0,l.iD)("div",{class:(0,i.C_)(["fuel-tank",{"fuel-tank_electro":1===t.type}]),onMousedown:s[0]||(s[0]=(...e)=>u.onMouseDown&&u.onMouseDown(...e)),onTouchstart:s[1]||(s[1]=(...e)=>u.onMouseDown&&u.onMouseDown(...e)),onMousemove:s[2]||(s[2]=(...e)=>u.onMouseMove&&u.onMouseMove(...e)),onTouchmove:s[3]||(s[3]=(...e)=>u.onMouseMove&&u.onMouseMove(...e))},[(0,l._)("div",oe,(0,i.zw)(u.tank)+(0,i.zw)(t.units),1),t.type?((0,l.wg)(),(0,l.iD)("div",ue,[(0,l._)("div",{class:(0,i.C_)(["fuel-tank__fill",{"fuel-tank__fill_electro":1===t.type}]),style:(0,i.j5)({height:`${t.modelValue}%`})},[(0,l.Wm)(n.uT,{name:"fade"},{default:(0,l.w5)((()=>[e.isActive?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("img",ce))])),_:1})],6)])):((0,l.wg)(),(0,l.iD)("div",{key:1,class:(0,i.C_)(["fuel-tank__fill",{"fuel-tank__fill_electro":1===t.type}]),style:(0,i.j5)({height:`${t.modelValue}%`})},[(0,l.Wm)(n.uT,{name:"fade"},{default:(0,l.w5)((()=>[e.isActive?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("img",re))])),_:1})],6))],34)}const _e={props:["units","availableTank","modelValue","type"],data:()=>({isActive:!1}),computed:{tank(){return Math.ceil(this.modelValue/100*this.availableTank)}},mounted(){document.addEventListener("mouseup",this.onMouseUp)},unmounted(){document.removeEventListener("mouseup",this.onMouseUp)},methods:{calcFill(e){let s=e.offsetY;if(e.touches){let t=e.touches[e.touches.length-1];const l=t.target.getBoundingClientRect().top;t&&(s=t.clientY-l)}const t=this.$el.offsetHeight,l=100*(1-s/t);return l>100?100:l<0?0:l},setFill(e){this.$emit("update:modelValue",e)},onMouseDown(e){this.isActive=!0,this.setFill(this.calcFill(e))},onMouseMove(e){this.isActive&&this.setFill(this.calcFill(e))},onMouseUp(){this.isActive=!1}}},fe=(0,N.Z)(_e,[["render",de],["__scopeId","data-v-31b03a34"]]),ke=fe,pe={width:"168",height:"168",viewBox:"0 0 168 168",fill:"none",xmlns:"http://www.w3.org/2000/svg"},we=(0,l._)("path",{d:"M117.999 50L91.4367 91.4366L50 117.998L76.562 76.5619L117.999 50Z",fill:"#F4F1E1"},null,-1),me=(0,l._)("path",{d:"M118 118L76.5633 91.4381L50.0013 50.0015L91.438 76.5634L118 118Z",fill:"#F4F1E1"},null,-1),ve=(0,l._)("circle",{cx:"84",cy:"84",r:"83",stroke:"#F4F1E1","stroke-opacity":"0.25","stroke-width":"2"},null,-1),Ce=[we,me,ve];function he(e,s){return(0,l.wg)(),(0,l.iD)("svg",pe,Ce)}const ye={},ge=(0,N.Z)(ye,[["render",he]]),Ee=ge;t(282005);const Te={NOT_STARTED:0,STARTED:1,FINISHED:2},be={name:"fuel",props:["openParams"],components:{FuelVolume:K,FuelTank:ke,FuelClassification:ne,ControlsClose:D.Z,IconClose:Ee},data(){return{FILLING_TYPE:y,FILLING_STATE:Te,type:0,fuelClass:null,fill:0,maxTank:140,tank:20,fillingState:Te.NOT_STARTED,costPerUnit:10}},computed:{cost(){const e=Math.ceil(this.fill/100*this.availableTank);return this.costPerUnit*e},fuelClasses(){return this.type===y.ELECTRO?g:T},fuelClassesColors(){return this.type===y.ELECTRO?E:b},isFinished(){return this.fillingState===Te.FINISHED},availableTank(){return this.maxTank-this.tank},title(){return this.type===y.ELECTRO?"Электрозаправка":"До полного,брат?"},units(){return this.type===y.ELECTRO?"%":"Л"},subtitle(){return this.type===y.ELECTRO?"Уровень заряда в автомобиле":"Уровень топлива в автомобиле"},buttonText(){return this.type===y.ELECTRO?"зарядиться":"Да,брат"},isMobile(){return this.$root.isMobile}},created(){this.$data.noAdaptation=!0,this.openParams&&this.setFillInfo(this.openParams,!1)},mounted(){window.setDrawLabelStatus(!1)},unmounted(){window.setDrawLabelStatus(!0)},methods:{selectClass(e){this.fuelClasses[e]&&(window.playSound("sounds/fuel/select/3.wav",!1),this.fuelClass=e,this.type===y.FUEL&&sendClientEvent(gm.EVENT_EXECUTE_PUBLIC,"OnPlayerSelectFuelClass",e))},setFillInfo(e,s=!0){let t=e;this.type=t[0],this.tank=t[1],this.maxTank=t[2],this.costPerUnit=t[3],s&&this.$forceUpdate()},playMenuSound(){window.playSound("sounds/fuel/menu/2.wav")},stopFilling(){this.fillingState=Te.FINISHED,window.stopSound(),setTimeout((()=>{this.close()}),3e3)},confirm(){this.playMenuSound();const e=()=>{window.playSound("sounds/fuel/fill_start/1.wav"),this.fillingState=Te.STARTED;const e=this.type,s=this.tank+Math.ceil(this.fill/100*this.availableTank);setTimeout((()=>{window.playSound("sounds/fuel/fill_benz/1.wav",!0),sendClientEvent(gm.EVENT_EXECUTE_PUBLIC,"OnPlayerStartFill",e,s)}),40)};setTimeout(e,200)},close(){window.closeInterface("Fuel"),sendClientEvent(gm.EVENT_EXECUTE_PUBLIC,"OnPlayerFillClose")}}},De=(0,N.Z)(be,[["render",h]]),Le=De}}]);
